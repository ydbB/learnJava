<center> 数据分片 </center>
需求：  

1. 按照产品进行存储；

2. 设置有效时间，过了有效时间进行覆盖；  

3. 采集器的数据量比较大。

----------------
现有的分库分表方式：
1. sharding-JDBC   





----

存在的问题：
* 主键
* 存储时长
* 如何访问数据
* 数据密度
* 如何删除最老的数据
  
---  

5000万以下，MySql性能较好  
CollectID ， DeviceKey, CreateTime => ID

存储时长：假设为三天  
1.更新快的设备  
2.更新较慢的设备

如何访问：  
根据主键确定方式具体设定，

数据密度：  
看实时数据库多长时间传输数据。
假设 1s 更新一次，设备共有 20 个采集数据，24 * 60 * 60 * 20 == 1728000 条数据
3 分钟更新一次 9600，

| id| name | value | device_key | insert_time|  
|---| -----| ------| ---------| --------- |
|178/2356 | 汇流箱| 7888.01 | HLX20200106| 202000106 10 ：14 ： 26

主键： collect_id + insert_time % time_period  

更新时间：  
数据更新：update(),  

产品信息表，增加 有效时间 字段，

按产品类别 => 数据表, insert_time => id 
数据库第一行：
用来统计 已有的设备数目，历史数据数目 当设备数目大于 10，或者数据大于阈值 的时候，就需要新建表了存储数据
