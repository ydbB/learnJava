# <center>Java 提供哪些IO方式？NIO如何实现多路复用？</center>
IO 一直是软件开发中的核心部分之一，伴随着海量数据增长和分布式系统的发展，IO 扩展能力愈发重要。幸运的是，Java 平台 IO 机制经过不断完善，虽然在某些方面仍有不足，但已经在实践中证明了其构建高扩展性应用的能力  

因此，我们就会问Java 提供哪些IO方式？NIO如何实现多路复用？
### 典型回答
Java IO 方式有很多种，基于不同的 IO 抽象模型和交互方式，可以进行简单区分。  
1.传统java.io包，基于流模型实现，提供了我们最为了解的IO模型，交互是同步阻塞的方式，在读写完成前，线程会一直阻塞。  
java.io包的特点是简单，直观，确定io效率和扩展性存在局限，容易造成性能瓶颈。  
人们把 java.net 包下的部分API也归到同步阻塞IO类库。  
2.java 1.4引入了NIO框架(java.nio)，提供了Channel，Selector，Buffer等新的抽象，可以构建多路复用，同步非阻塞程序。  
3.在java 7中，NIO有了进一步改进，NIO 2引入了异步非阻塞的IO方式，也叫AIO(Asynchronous IO)。AIO基于事件和回调机制，程序直接返回，当后台处理完后，会通知程序进行后续操作。  
###  面试官心里
在大数据时代背景下，IO是制约性能的核心，不懂IO机制？
### 考点分析
从传统IO到NIO，NIO2，其中又很多可以扩展的地方：
* 基础API的功能与设计，InputStream/OutputStream 和 Reader/Writer的关系和区别；  
* NIO，NIO2的基本组成；
* 给定场景，分别用不同模型实现，分析BIO，NIO等模型的设计和原理；
* NIO提供的高性能数据操作方式是基于什么原理，如何进行操作？
* 从开发者的角度，NIO存在哪些问题？有什么改进方法？
### 知识扩展
* 同步与异步，同步是一直可靠的运行机制，程序会等待当前调用的返回，才会进行下一步；异步是基于事件和回调机制，程序并不等待当前程序返回，而是在后台程序处理完后，通知相应线程完成后续操作。
* 阻塞和非阻塞，阻塞时，线程无法进行其他事务操作，知道阻塞结束；非阻塞是线程直接返回，后续由后台程序通知线程。  
在基本的IO中，我们需要了解：
* IO不仅仅是对文件操作，在网络中，如Socket也是带典型的IO操作；
* InputStream/OutputStream是用于操作字节的；
* Reader/Writer用于操作文件中的字符，增加了字符编码等功能；
* BufferedOutputStream等待缓冲实现，可以避免频繁磁盘读写，进而提高IO处理效率。 
1.java NIO
NIO的组成：
* Buffer，高效的数据容器，除了布尔类型，所有原始数据类型都有相应的 Buffer 实现。
* Channel，类似在 Linux 之类操作系统上看到的文件描述符，是 NIO 中被用来支持批量式 IO 操作的一种抽象；
* Selector，是 NIO 实现多路复用的基础，它提供了一种高效的机制，可以检测到注册在 Selector 上的多个 Channel 中，是否有 Channel 处于就绪状态，进而实现了单线程对多 Channel 的高效管理。
Selector 在linux中依赖epoll，Windows上NIO2则是依赖于iocp。
2.NIO能解决什么问题？
NIO 则是利用了单线程轮询事件的机制，通过高效地定位就绪的 Channel，来决定做什么，仅仅 select 阶段是阻塞的，可以有效避免大量客户端连接时，频繁线程切换带来的问题，应用的扩展能力有了非常大的提高。